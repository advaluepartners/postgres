2025/06/29 19:58:04 [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 [TRACE] listing potential installations for "github.com/hashicorp/amazon" that match ">= 0.0.2". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/barneycook/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x14000556100)}}, ReleasesOnly:false}}
2025/06/29 19:58:04 [TRACE] Found the following "github.com/hashicorp/amazon" installations: [{/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 v1.3.4 x5.0}]
2025/06/29 19:58:04 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2025/06/29 19:58:04 [INFO] found external [import] post-processors from amazon plugin
2025/06/29 19:58:04 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2025/06/29 19:58:04 plugin "/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64" does not support Protobuf, forcing use of Gob
2025/06/29 19:58:04 [TRACE] listing potential installations for <nil> that match "". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/barneycook/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x1400004ac00)}}, ReleasesOnly:false}}
2025/06/29 19:58:04 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2025/06/29 19:58:04 [INFO] found external [import] post-processors from amazon plugin
2025/06/29 19:58:04 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2025/06/29 19:58:04 [TRACE] validateValue: not active for ami_regions, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for ami_name, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for postgres-version, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for git-head-version, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for git_commit_sha, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for force-deregister, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for profile, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for environment, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for region, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for postgres_major_version, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for packer-execution-id, so skipping
2025/06/29 19:58:04 [TRACE] validateValue: not active for git_sha, so skipping
2025/06/29 19:58:04 [INFO] Starting external plugin /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 start builder ebs
2025/06/29 19:58:04 Starting plugin: /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 []string{"/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64", "start", "builder", "ebs"}
2025/06/29 19:58:04 Waiting for RPC address for: /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin4043127640
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin4043127640
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 Serving a plugin connection...
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 [TRACE] starting builder ebs
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-shell
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-shell"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-shell plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3208093421
2025/06/29 19:58:04 packer-provisioner-shell plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3208093421
2025/06/29 19:58:04 packer-provisioner-shell plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin287053000
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin287053000
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin270341940
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin270341940
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1730271798
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1730271798
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2174230989
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2174230989
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin510012948
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin510012948
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3345757581
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3345757581
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3385678917
2025/06/29 19:58:04 packer-provisioner-file plugin: Waiting for connection...
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin3385678917
2025/06/29 19:58:04 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-shell
2025/06/29 19:58:04 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-shell"}
2025/06/29 19:58:04 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/29 19:58:04 packer-provisioner-shell plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/29 19:58:04 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2661902700
2025/06/29 19:58:04 packer-provisioner-shell plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2661902700
2025/06/29 19:58:04 packer-provisioner-shell plugin: Waiting for connection...
2025/06/29 19:58:04 packer-provisioner-shell plugin: Serving a plugin connection...
2025/06/29 19:58:04 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:04 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:04 Build debug mode: false
2025/06/29 19:58:04 Force build: true
2025/06/29 19:58:04 On error: 
2025/06/29 19:58:04 Waiting on builds to complete...
2025/06/29 19:58:04 Starting build run: nix-packer-ubuntu.amazon-ebs.ubuntu
[1;32mnix-packer-ubuntu.amazon-ebs.ubuntu: output will be in this color.[0m

2025/06/29 19:58:04 Running builder: amazon-ebs
2025/06/29 19:58:04 [INFO] (telemetry) Starting builder amazon-ebs.ubuntu
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 Found region us-east-1
2025/06/29 19:58:04 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:04 [INFO] AWS Auth provider used: "SharedCredentialsProvider"
[1;32m2025-06-29T19:58:05+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Force Deregister flag found, skipping prevalidating AMI Name[0m
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:05 Using AMI Filters {
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   Filters: [{
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "virtualization-type",
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["hvm"]
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     },{
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "name",
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["capitala-project-ami-15.8-stage-1"]
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     },{
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "root-device-type",
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["ebs"]
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     }],
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   IncludeDeprecated: false,
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   Owners: ["amazon","self"]
2025/06/29 19:58:05 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: }
[0;32m2025-06-29T19:58:06+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Found Image ID: ami-0857098bba6a95bde[0m
[1;32m2025-06-29T19:58:06+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Setting public IP address to true on instance without a subnet ID[0m
[1;32m2025-06-29T19:58:06+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: No VPC ID provided, Packer will use the default VPC[0m
[1;32m2025-06-29T19:58:06+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Inferring subnet from the selected VPC "vpc-0ba07cf7a36d288ba"[0m
[1;32m2025-06-29T19:58:09+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Set subnet as "subnet-0fb5ab63f221bfd4f"[0m
[1;32m2025-06-29T19:58:09+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Creating temporary keypair: packer_68618cbc-a97d-640e-db27-683a5cacdfe2[0m
[1;32m2025-06-29T19:58:10+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Creating temporary security group for this instance: packer_68618cc2-99b8-e2ab-ae91-a184258fcc0d[0m
2025/06/29 19:58:10 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:10 [DEBUG] Waiting for temporary security group: sg-04b71b32686bdfb3a
2025/06/29 19:58:11 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:11 [DEBUG] Found security group sg-04b71b32686bdfb3a
[1;32m2025-06-29T19:58:11+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...[0m
[1;32m2025-06-29T19:58:12+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Launching a source AWS instance...[0m
[0;32m2025-06-29T19:58:12+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "appType": "postgres"[0m
[0;32m2025-06-29T19:58:12+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "creator": "packer"[0m
[0;32m2025-06-29T19:58:12+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "packerExecutionId": "1751223484"[0m
[0;32m2025-06-29T19:58:12+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "creator": "packer"[0m
[0;32m2025-06-29T19:58:12+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "appType": "postgres"[0m
[1;32m2025-06-29T19:58:12+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: changing public IP address config to true for instance on subnet "subnet-0fb5ab63f221bfd4f"[0m
[0;32m2025-06-29T19:58:14+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Instance ID: i-046c50bc01b96b145[0m
[1;32m2025-06-29T19:58:14+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Waiting for instance (i-046c50bc01b96b145) to become ready...[0m
[1;32m2025-06-29T19:58:30+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Using SSH communicator to connect: 13.220.199.167[0m
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 [INFO] Not using winrm communicator, skipping get password...
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 [INFO] Waiting for SSH, up to timeout: 15m0s
[1;32m2025-06-29T19:58:30+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Waiting for SSH to become available...[0m
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 Using host value: 13.220.199.167
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 [INFO] Attempting SSH connection to 13.220.199.167:22...
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 [DEBUG] reconnecting to TCP connection for SSH
2025/06/29 19:58:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:30 [DEBUG] handshaking with SSH
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] handshake complete!
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Opening new ssh session
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [INFO] agent forwarding enabled
[1;32m2025-06-29T19:58:31+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Connected to SSH![0m
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 Running the provision hook
2025/06/29 19:58:31 [INFO] (telemetry) Starting provisioner shell
2025/06/29 19:58:31 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/29 19:58:31 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/29 19:58:31 packer-provisioner-shell plugin: Opening /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-shell2191323737 for reading
[1;32m2025-06-29T19:58:31+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Provisioning with shell script: /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-shell2191323737[0m
2025/06/29 19:58:31 packer-provisioner-shell plugin: [INFO] 2103 bytes written for 'uploadData'
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Opening new ssh session
2025/06/29 19:58:31 [INFO] 2103 bytes written for 'uploadData'
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Starting remote scp process:  scp -vt /tmp
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Started SCP session, beginning transfers...
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Copying input data into temporary file so we can read the length
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] scp: Uploading script_2501.sh: perms=C0644 size=2103
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] SCP session complete, closing stdin pipe.
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Waiting for SSH session to complete.
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] scp stderr (length 32): Sink: C0644 2103 script_2501.sh
2025/06/29 19:58:31 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:31 [DEBUG] Opening new ssh session
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [DEBUG] starting remote command: chmod 0755 /tmp/script_2501.sh
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [INFO] RPC endpoint: Communicator ended with: 0
2025/06/29 19:58:32 [INFO] RPC client: Communicator ended with: 0
2025/06/29 19:58:32 [INFO] RPC endpoint: Communicator ended with: 0
2025/06/29 19:58:32 packer-provisioner-shell plugin: [INFO] RPC client: Communicator ended with: 0
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [DEBUG] Opening new ssh session
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [DEBUG] starting remote command: chmod +x /tmp/script_2501.sh; PACKER_BUILDER_TYPE='amazon-ebs' PACKER_BUILD_NAME='ubuntu'  /tmp/script_2501.sh
[0;32m2025-06-29T19:58:32+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: === Setting up 60GB build volume for Nix ===[0m
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [ERROR] Remote command exited with '2': chmod +x /tmp/script_2501.sh; PACKER_BUILDER_TYPE='amazon-ebs' PACKER_BUILD_NAME='ubuntu'  /tmp/script_2501.sh
2025/06/29 19:58:32 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/29 19:58:32 [INFO] RPC endpoint: Communicator ended with: 2
2025/06/29 19:58:32 [INFO] 126 bytes written for 'stdout'
2025/06/29 19:58:32 [INFO] 0 bytes written for 'stderr'
[0;32m2025-06-29T19:58:32+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: /tmp/script_2501.sh: 15: Illegal number: 10737418240[0m
2025/06/29 19:58:32 [INFO] RPC client: Communicator ended with: 2
2025/06/29 19:58:32 [INFO] RPC endpoint: Communicator ended with: 2
2025/06/29 19:58:32 packer-provisioner-shell plugin: [INFO] 126 bytes written for 'stdout'
2025/06/29 19:58:32 packer-provisioner-shell plugin: [INFO] 0 bytes written for 'stderr'
2025/06/29 19:58:32 packer-provisioner-shell plugin: [INFO] RPC client: Communicator ended with: 2
[0;32m2025-06-29T19:58:32+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu:   103809024[0m
[0;32m2025-06-29T19:58:32+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: 10631512064[0m
2025/06/29 19:58:32 [INFO] (telemetry) ending shell
[1;32m2025-06-29T19:58:32+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Provisioning step had errors: Running the cleanup provisioner, if present...[0m
[1;32m2025-06-29T19:58:32+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Terminating the source AWS instance...[0m
[1;32m2025-06-29T19:59:04+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Cleaning up any extra volumes...[0m
[1;32m2025-06-29T19:59:04+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: No volumes to clean up, skipping[0m
[1;32m2025-06-29T19:59:04+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Deleting temporary security group...[0m
[1;32m2025-06-29T19:59:05+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Deleting temporary keypair...[0m
2025/06/29 19:59:06 [INFO] (telemetry) ending amazon-ebs.ubuntu
==> Wait completed after 1 minute 1 second
[1;31m2025-06-29T19:59:06+01:00: Build 'nix-packer-ubuntu.amazon-ebs.ubuntu' errored after 1 minute 1 second: Script exited with non-zero exit status: 2. Allowed exit codes are: [0][0m

2025/06/29 19:59:06 machine readable: error-count []string{"1"}
==> Some builds didn't complete successfully and had errors:
==> Wait completed after 1 minute 1 second

==> Some builds didn't complete successfully and had errors:
2025/06/29 19:59:06 machine readable: nix-packer-ubuntu.amazon-ebs.ubuntu,error []string{"Script exited with non-zero exit status: 2. Allowed exit codes are: [0]"}
==> Builds finished but no artifacts were created.
--> nix-packer-ubuntu.amazon-ebs.ubuntu: Script exited with non-zero exit status: 2. Allowed exit codes are: [0]

2025/06/29 19:59:06 [INFO] (telemetry) Finalizing.
==> Builds finished but no artifacts were created.
2025/06/29 19:59:06 waiting for all plugin processes to complete...
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
2025/06/29 19:59:06 /opt/homebrew/bin/packer: plugin process exited
