2025/06/30 01:13:22 [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:22 [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:22 [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:22 [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:22 [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:22 [TRACE] listing potential installations for "github.com/hashicorp/amazon" that match ">= 0.0.2". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/barneycook/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x14000146100)}}, ReleasesOnly:false}}
2025/06/30 01:13:22 [TRACE] Found the following "github.com/hashicorp/amazon" installations: [{/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 v1.3.4 x5.0}]
2025/06/30 01:13:22 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2025/06/30 01:13:22 [INFO] found external [import] post-processors from amazon plugin
2025/06/30 01:13:22 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2025/06/30 01:13:22 plugin "/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64" does not support Protobuf, forcing use of Gob
2025/06/30 01:13:22 [TRACE] listing potential installations for <nil> that match "". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/barneycook/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x1400004ac00)}}, ReleasesOnly:false}}
2025/06/30 01:13:22 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2025/06/30 01:13:22 [INFO] found external [import] post-processors from amazon plugin
2025/06/30 01:13:22 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2025/06/30 01:13:22 [TRACE] validateValue: not active for ami_name, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for postgres-version, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for postgres_major_version, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for force-deregister, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for git_sha, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for ami_regions, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for environment, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for region, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for packer-execution-id, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for profile, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for git-head-version, so skipping
2025/06/30 01:13:22 [TRACE] validateValue: not active for git_commit_sha, so skipping
2025/06/30 01:13:22 [INFO] Starting external plugin /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 start builder ebs
2025/06/30 01:13:22 Starting plugin: /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 []string{"/Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64", "start", "builder", "ebs"}
2025/06/30 01:13:22 Waiting for RPC address for: /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64
2025/06/30 01:13:22 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:22 Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2476678303
2025/06/30 01:13:22 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:22 Waiting for connection...
2025/06/30 01:13:22 Received unix RPC address for /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2476678303
2025/06/30 01:13:22 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:22 Serving a plugin connection...
2025/06/30 01:13:22 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:22 [TRACE] starting builder ebs
2025/06/30 01:13:22 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:23 [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-shell
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-shell"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-shell plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin542690601
2025/06/30 01:13:23 packer-provisioner-shell plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin542690601
2025/06/30 01:13:23 packer-provisioner-shell plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin422940625
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin422940625
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1837999201
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1837999201
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1543782031
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1543782031
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin4164216858
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin4164216858
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1874634431
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1874634431
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1869953139
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin1869953139
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-file
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-file"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-file plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-file plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2694529885
2025/06/30 01:13:23 packer-provisioner-file plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2694529885
2025/06/30 01:13:23 packer-provisioner-file plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-file plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 [INFO] Starting external plugin /opt/homebrew/bin/packer execute packer-provisioner-shell
2025/06/30 01:13:23 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-shell"}
2025/06/30 01:13:23 Waiting for RPC address for: /opt/homebrew/bin/packer
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] Packer version: 1.12.0 [go1.22.9 darwin arm64]
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/barneycook/.packerconfig
2025/06/30 01:13:23 packer-provisioner-shell plugin: [INFO] Setting cache directory: /Users/barneycook/.cache/packer
2025/06/30 01:13:23 packer-provisioner-shell plugin: Plugin address: unix /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2019665958
2025/06/30 01:13:23 packer-provisioner-shell plugin: Waiting for connection...
2025/06/30 01:13:23 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-plugin2019665958
2025/06/30 01:13:23 packer-provisioner-shell plugin: Serving a plugin connection...
2025/06/30 01:13:23 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:23 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:23 Build debug mode: false
2025/06/30 01:13:23 Force build: true
2025/06/30 01:13:23 On error: 
2025/06/30 01:13:23 Waiting on builds to complete...
[1;32mnix-packer-ubuntu.amazon-ebs.ubuntu: output will be in this color.[0m

2025/06/30 01:13:23 Starting build run: nix-packer-ubuntu.amazon-ebs.ubuntu
2025/06/30 01:13:23 Running builder: amazon-ebs
2025/06/30 01:13:23 [INFO] (telemetry) Starting builder amazon-ebs.ubuntu
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:23 [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:23 Found region us-east-1
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:23 [INFO] AWS Auth provider used: "SharedCredentialsProvider"
[1;32m2025-06-30T01:13:23+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Force Deregister flag found, skipping prevalidating AMI Name[0m
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:23 Using AMI Filters {
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   Filters: [{
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "virtualization-type",
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["hvm"]
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     },{
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "name",
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["capitala-project-ami-15.8-stage-1"]
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     },{
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Name: "root-device-type",
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:       Values: ["ebs"]
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:     }],
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   IncludeDeprecated: false,
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin:   Owners: ["amazon","self"]
2025/06/30 01:13:23 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: }
[0;32m2025-06-30T01:13:24+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Found Image ID: ami-0857098bba6a95bde[0m
[1;32m2025-06-30T01:13:24+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Setting public IP address to true on instance without a subnet ID[0m
[1;32m2025-06-30T01:13:24+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: No VPC ID provided, Packer will use the default VPC[0m
[1;32m2025-06-30T01:13:25+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Inferring subnet from the selected VPC "vpc-0ba07cf7a36d288ba"[0m
[1;32m2025-06-30T01:13:27+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Set subnet as "subnet-07f1488da5091212f"[0m
[1;32m2025-06-30T01:13:27+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Creating temporary keypair: packer_6861d6a3-4ceb-d8c3-fe88-ec221a32e06d[0m
[1;32m2025-06-30T01:13:28+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Creating temporary security group for this instance: packer_6861d6a8-be68-3567-fa4a-fcf847a21384[0m
2025/06/30 01:13:29 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:29 [DEBUG] Waiting for temporary security group: sg-05aa55748ae142d11
2025/06/30 01:13:30 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:30 [DEBUG] Found security group sg-05aa55748ae142d11
[1;32m2025-06-30T01:13:30+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...[0m
[1;32m2025-06-30T01:13:31+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Launching a source AWS instance...[0m
[0;32m2025-06-30T01:13:31+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "appType": "postgres"[0m
[0;32m2025-06-30T01:13:31+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "creator": "packer"[0m
[0;32m2025-06-30T01:13:31+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "packerExecutionId": "1751242402"[0m
[0;32m2025-06-30T01:13:31+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "appType": "postgres"[0m
[0;32m2025-06-30T01:13:31+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Adding tag: "creator": "packer"[0m
[1;32m2025-06-30T01:13:31+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: changing public IP address config to true for instance on subnet "subnet-07f1488da5091212f"[0m
[0;32m2025-06-30T01:13:32+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Instance ID: i-0f6b0abdefbae4845[0m
[1;32m2025-06-30T01:13:32+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Waiting for instance (i-0f6b0abdefbae4845) to become ready...[0m
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [INFO] Not using winrm communicator, skipping get password...
[1;32m2025-06-30T01:13:49+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Using SSH communicator to connect: 44.197.193.5[0m
[1;32m2025-06-30T01:13:49+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Waiting for SSH to become available...[0m
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [INFO] Waiting for SSH, up to timeout: 15m0s
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 Using host value: 44.197.193.5
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [INFO] Attempting SSH connection to 44.197.193.5:22...
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [DEBUG] reconnecting to TCP connection for SSH
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [DEBUG] handshaking with SSH
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [DEBUG] handshake complete!
2025/06/30 01:13:49 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:49 [DEBUG] Opening new ssh session
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [INFO] agent forwarding enabled
[1;32m2025-06-30T01:13:50+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Connected to SSH![0m
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 Running the provision hook
2025/06/30 01:13:50 [INFO] (telemetry) Starting provisioner shell
2025/06/30 01:13:50 packer-provisioner-shell plugin: [DEBUG] - common: sending ConfigSpec as gob
2025/06/30 01:13:50 [DEBUG] - common: receiving ConfigSpec as gob
2025/06/30 01:13:50 packer-provisioner-shell plugin: Opening /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-shell4283421738 for reading
[1;32m2025-06-30T01:13:50+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Provisioning with shell script: /var/folders/60/djqdr1sn5x5dmwllvmnlf3dc0000gn/T/packer-shell4283421738[0m
2025/06/30 01:13:50 packer-provisioner-shell plugin: [INFO] 722 bytes written for 'uploadData'
2025/06/30 01:13:50 [INFO] 722 bytes written for 'uploadData'
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Opening new ssh session
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Starting remote scp process:  scp -vt /tmp
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Started SCP session, beginning transfers...
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Copying input data into temporary file so we can read the length
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] scp: Uploading script_728.sh: perms=C0644 size=722
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] SCP session complete, closing stdin pipe.
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Waiting for SSH session to complete.
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] scp stderr (length 30): Sink: C0644 722 script_728.sh
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Opening new ssh session
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] starting remote command: chmod 0755 /tmp/script_728.sh
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [INFO] RPC endpoint: Communicator ended with: 0
2025/06/30 01:13:50 [INFO] RPC client: Communicator ended with: 0
2025/06/30 01:13:50 [INFO] RPC endpoint: Communicator ended with: 0
2025/06/30 01:13:50 packer-provisioner-shell plugin: [INFO] RPC client: Communicator ended with: 0
2025/06/30 01:13:50 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:50 [DEBUG] Opening new ssh session
2025/06/30 01:13:51 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:51 [DEBUG] starting remote command: chmod +x /tmp/script_728.sh; PACKER_BUILDER_TYPE='amazon-ebs' PACKER_BUILD_NAME='ubuntu'  /tmp/script_728.sh
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: === DEFINITIVE FIX: Mount 60GB volume at /nix instead of /nix/store ===[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: mke2fs 1.45.5 (07-Jan-2020)[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Creating filesystem with 15728640 4k blocks and 3932160 inodes[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Filesystem UUID: 4ff02c8b-3ded-42cd-8223-134b3b16fb21[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Superblock backups stored on blocks:[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: 	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: 	4096000, 7962624, 11239424[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu:[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Allocating group tables:   0/480       done[0m
[0;32m2025-06-30T01:13:51+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Writing inode tables:   0/480       done[0m
[0;32m2025-06-30T01:13:52+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Creating journal (65536 blocks): done[0m
2025/06/30 01:13:52 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:52 [ERROR] Remote command exited with '32': chmod +x /tmp/script_728.sh; PACKER_BUILDER_TYPE='amazon-ebs' PACKER_BUILD_NAME='ubuntu'  /tmp/script_728.sh
2025/06/30 01:13:52 packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64 plugin: 2025/06/30 01:13:52 [INFO] RPC endpoint: Communicator ended with: 32
[0;32m2025-06-30T01:13:52+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: Writing superblocks and filesystem accounting information:   0/480       done[0m
2025/06/30 01:13:52 [INFO] 713 bytes written for 'stdout'
2025/06/30 01:13:52 [INFO] 0 bytes written for 'stderr'
2025/06/30 01:13:52 [INFO] RPC client: Communicator ended with: 32
[0;32m2025-06-30T01:13:52+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu:[0m
2025/06/30 01:13:52 [INFO] RPC endpoint: Communicator ended with: 32
2025/06/30 01:13:52 packer-provisioner-shell plugin: [INFO] 713 bytes written for 'stdout'
2025/06/30 01:13:52 packer-provisioner-shell plugin: [INFO] 0 bytes written for 'stderr'
2025/06/30 01:13:52 packer-provisioner-shell plugin: [INFO] RPC client: Communicator ended with: 32
[0;32m2025-06-30T01:13:52+01:00:     nix-packer-ubuntu.amazon-ebs.ubuntu: mount: /nix: mount point does not exist.[0m
2025/06/30 01:13:52 [INFO] (telemetry) ending shell
[1;32m2025-06-30T01:13:52+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Provisioning step had errors: Running the cleanup provisioner, if present...[0m
[1;32m2025-06-30T01:13:52+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Terminating the source AWS instance...[0m
[1;32m2025-06-30T01:14:24+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Cleaning up any extra volumes...[0m
[1;32m2025-06-30T01:14:24+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: No volumes to clean up, skipping[0m
[1;32m2025-06-30T01:14:24+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Deleting temporary security group...[0m
[1;32m2025-06-30T01:14:25+01:00: ==> nix-packer-ubuntu.amazon-ebs.ubuntu: Deleting temporary keypair...[0m
2025/06/30 01:14:26 [INFO] (telemetry) ending amazon-ebs.ubuntu
==> Wait completed after 1 minute 3 seconds
2025/06/30 01:14:26 machine readable: error-count []string{"1"}
[1;31m2025-06-30T01:14:26+01:00: Build 'nix-packer-ubuntu.amazon-ebs.ubuntu' errored after 1 minute 3 seconds: Script exited with non-zero exit status: 32. Allowed exit codes are: [0][0m

==> Wait completed after 1 minute 3 seconds

==> Some builds didn't complete successfully and had errors:
==> Some builds didn't complete successfully and had errors:
2025/06/30 01:14:26 machine readable: nix-packer-ubuntu.amazon-ebs.ubuntu,error []string{"Script exited with non-zero exit status: 32. Allowed exit codes are: [0]"}
==> Builds finished but no artifacts were created.
--> nix-packer-ubuntu.amazon-ebs.ubuntu: Script exited with non-zero exit status: 32. Allowed exit codes are: [0]

==> Builds finished but no artifacts were created.
2025/06/30 01:14:26 [INFO] (telemetry) Finalizing.
2025/06/30 01:14:27 waiting for all plugin processes to complete...
2025/06/30 01:14:27 /Users/barneycook/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.4_x5.0_darwin_arm64: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
2025/06/30 01:14:27 /opt/homebrew/bin/packer: plugin process exited
